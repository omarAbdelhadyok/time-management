<section class="row mt-5">
  <h2 class="mat-h2">Add Project</h2>

  <form class="w-100" #projectForm="ngForm">
    
    <!--Project title-->
    <mat-form-field>
      <input type="text"
        matInput
        placeholder="Title"
        required
        maxlength="25"
        minlength="5"
        name="title"
        #title="ngModel"
        [(ngModel)]="project.title"
      />

      <mat-error *ngIf="title.touched && title.errors?.required">
        Title is required
      </mat-error>

      <mat-error *ngIf="title.touched && title.errors?.minlength">
        Title must be at least 5 charachters
      </mat-error>
      
    </mat-form-field>

    <!--project description-->
    <mat-form-field class="mt-2">
      <input type="text"
        matInput
        placeholder="Description"
        required
        maxlength="50"
        minlength="5"
        name="description"
        #description="ngModel"
        [(ngModel)]="project.description"
      />

      <mat-error *ngIf="description.touched && description.errors?.required">
        Description is required
      </mat-error>

      <mat-error *ngIf="description.touched && description.errors?.minlength">
        Description must be at least 5 charachters
      </mat-error>
      
    </mat-form-field>

    <!--project tasks-->
    <div class="project-tasks">
      
      <div class="add-task">
        
        <mat-form-field>
          <input type="text"
            matInput
            placeholder="Task"
            required
            maxlength="50"
            minlength="5"
            name="task"
            #task="ngModel"
            ngModel
          />
    
          <mat-error *ngIf="task.touched && task.errors?.required">
            Task is required
          </mat-error>
    
          <mat-error *ngIf="task.touched && task.errors?.minlength">
            Task must be at least 5 charachters
          </mat-error>
          
        </mat-form-field>

        <div class="mt-2">
          <button mat-raised-button
            type="button"
            [disabled]="task.invalid"
            (click)="addTask(task)">
            Add
          </button>
        </div>
        
      </div>

      <div class="tasks">
        
        <mat-list role="list" *ngIf="project.tasks?.length != 0">
          <mat-list-item role="listitem" *ngFor="let task of project.tasks">
            {{task.task}}
            <mat-divider></mat-divider>
          </mat-list-item>
        </mat-list>
        
      </div>
    </div>


    <div class="mt-3 text-center">
      <button mat-raised-button
        color="primary"
        [disabled]="projectForm.invalid || busyCreating || busyUpdating"
        (click)="onSave()">
        Save

        <img *ngIf="busyCreating || busyUpdating"
          src="./../../../assets/images/loader.svg"
          alt="Loader ..."
          style="width: 25px; height: 25px;"
        />
      </button>
    </div>

  </form>

</section>